
<!-- README.md is generated from README.Rmd. Please edit that file -->

<!-- badges: start -->

<!-- badges: end -->

# Interactive Fixed Effects (ife) Package

The `ife` package contains code to estimate treatment effects in a setup
where a researcher has access to panel data (or, hopefully in the near
future, repeated cross sections data) and where untreated potential
outcomes are generated by an interactive fixed effects model.

The package is not currently available on CRAN, but it can be the
development version of the package can be installed from github by

``` r
# install.packages("devtools")
devtools::install_github("bcallaway11/ife")
```

## Example

Next, we provide a brief example using the application from Callaway and
Karami (2021).

``` r
res <- ife(yname="earn",
           gname="first.displaced",
           tname="year",
           idname="id",
           data=job_displacement_data,
           nife=1,
           xformla=~EDUC + race + gender,
           zformla=~EDUC + race + gender + afqt,
           ret_ife_regs=TRUE,
           anticipation=1,
           cband=FALSE,
           alp=0.10,
           boot_type="multiplier",
           biters=1000,
           cl=10)

summary(res)
#> 
#> Overall ATT:  
#>        ATT    Std. Error     [ 90%  Conf. Int.]  
#>  -3913.851      1134.183  -5779.416   -2048.285 *
#> 
#> 
#> Dynamic Effects:
#>  Event Time   Estimate Std. Error     [90%  Conf. Band]  
#>          -6   -63.8360   935.2442 -1602.176   1474.5038  
#>          -4   -63.4326   718.9872 -1246.061   1119.1961  
#>          -2  -664.5203   599.9842 -1651.407    322.3659  
#>           0 -3848.8739  1012.5293 -5514.336  -2183.4114 *
#>           2 -4179.1319  1517.3515 -6674.953  -1683.3107 *
#>           4 -1454.0791  2692.8549 -5883.431   2975.2730  
#> ---
#> Signif. codes: `*' confidence band does not cover 0
ggpte(res) + ylim(c(-6000,6000))
```

<img src="man/figures/README-unnamed-chunk-4-1.png" width="100%" />

We also have some code for running *individual-specific linear trends
models*. These are a special case of the interactive fixed effects
models that we consider in the paper, but where the factors \(F_t\) are
restricted to be equal to \(t\). We mostly argue *against* these sorts
of models in the paper, but one advantage is that they do not require
any restrictions/assumptions about finding a covariate whose effects do
not change over time.

This code also implements a version of linear trends that is specific to
untreated potential outcomes. Presumably, many of the same criticisms
(and perhaps more actually) in recent papers about implementing DID with
a two-way fixed effects regression likely apply when one includes
individual-specific linear trends in the same sort of specification. The
code we provide here circumvents those issues.

``` r
lt_res <- linear_trends(yname="earn",
                        gname="first.displaced",
                        tname="year",
                        idname="id",
                        data=job_displacement_data,
                        xformla=~1,
                        anticipation=1,
                        cband=FALSE,
                        alp=0.10,
                        boot_type="multiplier",
                        biters=1000,
                        cl=10)

summary(lt_res)
#> 
#> Overall ATT:  
#>        ATT    Std. Error     [ 90%  Conf. Int.]  
#>  -3610.586      1293.201  -5737.712   -1483.459 *
#> 
#> 
#> Dynamic Effects:
#>  Event Time   Estimate Std. Error     [90%  Conf. Band]  
#>          -6   -80.0095   840.6203 -1462.707   1302.6878  
#>          -4  -185.5270   742.5218 -1406.867   1035.8127  
#>          -2  -659.0171   617.9471 -1675.450    357.4154  
#>           0 -3751.3352  1226.3774 -5768.547  -1734.1238 *
#>           2 -3869.5496  1793.1055 -6818.946   -920.1535 *
#>           4  -376.1558  3158.6755 -5571.715   4819.4030  
#> ---
#> Signif. codes: `*' confidence band does not cover 0
ggpte(lt_res) + ylim(c(-6000,6000))
```

<img src="man/figures/README-unnamed-chunk-5-1.png" width="100%" />
